import{c as W,a as Ye,r as i,u as N,b as L,j as e,O as Ae,N as B,d as re,e as Qe,i as es,g as ss,f as ts,h as Te,k as as,l as rs,m as os,n as P,o as y,s as is,p as Ne,v as U,q as C,I as ns,t as ls,w as cs,x as ds,y as us,B as ue,z as he,E as me,G as pe,A as hs,C as ms,D as ps,F as xs,H as _,J as gs,K as js,L as F,M as K,P as fs,Q as bs,R as xe,S as ge,T as je,U as fe,V as be,W as Ce,X as Cs,Y as Ls,Z as vs,_ as X,$ as M,a0 as _s,a1 as T,a2 as ws,a3 as Me,a4 as w,a5 as q,a6 as Le,a7 as Ee,a8 as $e,a9 as z,aa as Pe,ab as Ie,ac as ys,ad as ks,ae as Ss,af as v,ag as As,ah as Ts,ai as Ns,aj as Ms,ak as Es}from"./script-n-modules.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const $s={dataLoadState:0,dataLoadError:null,musicAlbums:[],listAlbums:[],radioList:{}},Re=W({name:"musicLists",initialState:$s,reducers:{setLoadStateML:(t,s)=>{t.dataLoadState=s.payload.state,t.dataLoadError=s.payload.error},setDataML:(t,s)=>{t.musicAlbums=s.payload.albums,t.radioList=s.payload.radioList},setResultLoadML:(t,s)=>{t.dataLoadState=s.payload.state,t.dataLoadError=s.payload.error,t.musicAlbums=s.payload.data.albums,t.listAlbums=s.payload.data.albums.map(a=>({idAlbum:a.idAlbum,titleAlbum:a.titleAlbum,photoAlbum:a.photoAlbum})),t.radioList=s.payload.data.radioList},resetStateML:(t,s)=>{s.payload&&(t.dataLoadState=0,t.dataLoadError=null,t.musicAlbums=[],t.listAlbums=[],t.radioList={})}}}),Ps=Re.reducer,{setDataML:ea,setLoadStateML:ve,setResultLoadML:Is,resetStateML:Rs}=Re.actions,O={idAlbum:"my",titleAlbum:"Мой плейлист",photoAlbum:"https://demotivation.ru/wp-content/uploads/2021/12/image_562610131056464036330.jpg",tracks:[]},Ds={dataLoadState:0,dataLoadError:null,userAlbums:["albums"],userMusicList:{...O},listIdTrack:[]},oe=W({name:"musicUser",initialState:Ds,reducers:{setLoadStateMU:(t,s)=>{t.dataLoadState=s.payload.state,t.dataLoadError=s.payload.error},addNewTrack:(t,s)=>{var r;const a=s.payload;((r=t.userMusicList.tracks)==null?void 0:r.some(o=>o.idTrack===a.idTrack))||(t.userMusicList.tracks.push(a),t.listIdTrack.push(a.idTrack))},delTrackMU:(t,s)=>{const a=s.payload;t.userMusicList.tracks=t.userMusicList.tracks.filter(n=>n.idTrack!==a),t.listIdTrack=t.listIdTrack.filter(n=>n!==a)},setDataMU:(t,s)=>{var n;const a=s.payload.data;t.userAlbums=a.albums||{},t.userMusicList=a.musicList?{...O,...a.musicList}:{...O},t.listIdTrack=((n=a.musicList.tracks)==null?void 0:n.map(r=>r.idTrack))||[]},setResultLoadMU:(t,s)=>{t.dataLoadState=s.payload.state,t.dataLoadError=s.payload.error,oe.caseReducers.setDataMU(t,s)},resetStateMU:(t,s)=>{s.payload&&(t.dataLoadState=0,t.dataLoadError=null,t.userAlbums=["albums"],t.userMusicList={...O},t.listIdTrack=[])}}}),{setLoadStateMU:_e,setDataMU:sa,setResultLoadMU:Us,addNewTrack:zs,delTrackMU:Vs,resetStateMU:Fs}=oe.actions,Bs=oe.reducer,De={email:null,uid:null},Ue={appearance:"dark",colorTheme:"amber"},Os={dataLoadState:0,dataLoadError:null,user:{...De},userSettings:{...Ue},userIsAuth:!1},ze=W({name:"userData",initialState:Os,reducers:{setLoadStateUD:(t,s)=>{t.dataLoadState=s.payload.state,t.dataLoadError=s.payload.error},setUserAuth:(t,s)=>{t.userIsAuth=s.payload},setResultLoadUD:(t,s)=>{t.dataLoadState=s.payload.state,t.dataLoadError=s.payload.error,t.user=s.payload.data},setUserSettings:(t,s)=>{t.userSettings=s.payload.settings},setAppearance:(t,s)=>{t.userSettings.appearance=s.payload},setColorTheme:(t,s)=>{t.userSettings.colorTheme=s.payload},resetStateUD:(t,s)=>{s.payload&&(t.dataLoadState=0,t.dataLoadError=null,t.user={...De},t.userSettings={...Ue},t.userIsAuth=!1)}}}),{setLoadStateUD:R,setUserAuth:ee,setResultLoadUD:Ve,setUserSettings:Fe,setAppearance:Zs,setColorTheme:Hs,resetStateUD:Gs}=ze.actions,Ws=ze.reducer,Ks={playListTrack:[],currentTrack:"https://s3.deliciouspeaches.com/get/music/20190421/Rammstein_-_Haifisch_63640728.mp3",isPlaying:!1},Be=W({name:"appCache",initialState:Ks,reducers:{setCurrentTrack(t,s){t.currentTrack=s.payload},togglePlay(t){t.isPlaying=!t.isPlaying}}}),Js=Be.reducer,{setCurrentTrack:Xs,togglePlay:qs}=Be.actions,Ys=Ye({reducer:{musicLists:Ps,musicUser:Bs,userData:Ws,appCache:Js},middleware:t=>t({serializableCheck:!1})}),Qs=({uriLogin:t})=>{const s=N(),a=L(l=>l.userData.userIsAuth),[n,r]=i.useState(!0),o=()=>{const l=localStorage.getItem("userKeyData");if(!l)return!1;const c=JSON.parse(atob(l.split(".")[1])),u=Math.floor(Date.now()/1e3);return console.log(`Осталось сессии: ${((c.exp-u)/60).toFixed(2)} минут`),c.exp>u?{email:c.email,uid:c.user_id}:null};return i.useEffect(()=>{if(!a){const l=o();l?(s(Ve({state:2,error:null,data:l})),s(ee(!0))):s(ee(!1))}r(!1)},[s,a]),n?e.jsx(i.Fragment,{}):a?e.jsx(Ae,{}):e.jsx(B,{to:t})},et=i.memo(Qs),st=({title:t})=>{const s=re();return i.useEffect(()=>{document.title=t},[s,t]),null},Y=i.memo(st);let m=new Qe.EventEmitter;const tt=(t,s=500)=>{const[a,n]=i.useState(t);return i.useEffect(()=>{let r;return t?n(!0):r=setTimeout(()=>n(!1),s),()=>clearTimeout(r)},[t,s]),a};function at({component:t,visible:s=!0,delay:a=1e3,mountClass:n="",unmountClass:r="",className:o="",...l}){const c=tt(s,a);return!!c&&e.jsx("div",{className:`${c&&!s?r:n} ${o}`,children:e.jsx(t,{...l,children:l.children})})}const se=i.memo(at),rt=JSON.parse('{"apiKey": "AIzaSyD4y08rA6vQnPazm6QpqAlIFEquxRMW7HA", "authDomain": "my-project-jsx-72502.firebaseapp.com", "projectId": "my-project-jsx-72502", "storageBucket": "my-project-jsx-72502.firebasestorage.app", "messagingSenderId": "593778910270", "appId": "1:593778910270:web:1de92e1a9e515e258c9d6f", "databaseURL": "https://my-project-jsx-72502-default-rtdb.europe-west1.firebasedatabase.app/"}'),Oe=es(rt),Ze=ss(Oe),ot="dbMusicLists",ie="dbMusicUsers",G="dbUsersData",we=ts(Oe);function Z(t){let s=t;switch(t){case"auth/email-already-in-use":s="Эл. почта уже используется!";break;case"auth/user-not-found":s="Такой пользователь не найден!";break;case"auth/user/disabled":s="Пользователь заблокирован!";break;case"auth/invalid-credential":s="Неверный email или пароль!";break}return s}const Q=async t=>{try{const s=Te(Ze),a=await rs(os(s,t));return a.exists()?a.val():null}catch(s){return console.error("Ошибка при получении данных:",s.message),null}},V=async(t,s)=>{try{const a=Te(Ze),n={};n[t]=s,await as(a,n).then(()=>!0)}catch(a){return console.log(a.message),null}},He=e.jsxs("svg",{className:"logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 18V5l12-2v13"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("circle",{cx:"18",cy:"16",r:"3"})]});function it(){return e.jsxs("div",{className:"logo-for-page__box",children:[e.jsx("div",{className:"logo-for-page__img",children:He}),e.jsx(P,{as:"h1",size:"6",trim:"start",mt:"2",children:"MuSBoX"})]})}const nt=e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 h-4 w-4",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),lt=e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 h-4 w-4",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),ct=e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 h-4 w-4",children:[e.jsx("circle",{cx:"12",cy:"12",r:"2"}),e.jsx("path",{d:"M4.93 19.07a10 10 0 0 1 0-14.14"}),e.jsx("path",{d:"M7.76 16.24a6 6 0 0 1-1.3-1.95 6 6 0 0 1 0-4.59 6 6 0 0 1 1.3-1.95"}),e.jsx("path",{d:"M16.24 7.76a6 6 0 0 1 1.3 2 6 6 0 0 1 0 4.59 6 6 0 0 1-1.3 1.95"}),e.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),dt=e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 h-4 w-4",children:[e.jsx("path",{d:"m16 6 4 14"}),e.jsx("path",{d:"M12 6v14"}),e.jsx("path",{d:"M8 8v12"}),e.jsx("path",{d:"M4 4v16"})]}),ut=e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7.50009 0.877014C3.84241 0.877014 0.877258 3.84216 0.877258 7.49984C0.877258 11.1575 3.8424 14.1227 7.50009 14.1227C11.1578 14.1227 14.1229 11.1575 14.1229 7.49984C14.1229 3.84216 11.1577 0.877014 7.50009 0.877014ZM1.82726 7.49984C1.82726 4.36683 4.36708 1.82701 7.50009 1.82701C10.6331 1.82701 13.1729 4.36683 13.1729 7.49984C13.1729 10.6328 10.6331 13.1727 7.50009 13.1727C4.36708 13.1727 1.82726 10.6328 1.82726 7.49984ZM8 4.50001C8 4.22387 7.77614 4.00001 7.5 4.00001C7.22386 4.00001 7 4.22387 7 4.50001V7.50001C7 7.63262 7.05268 7.7598 7.14645 7.85357L9.14645 9.85357C9.34171 10.0488 9.65829 10.0488 9.85355 9.85357C10.0488 9.65831 10.0488 9.34172 9.85355 9.14646L8 7.29291V4.50001Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});function ht({listAlbums:t,selectBtn:s}){const a=r=>{m.emit("setNavigate",r)},n=t?t.map(r=>e.jsxs(y,{onClick:()=>a($+"/"+r.idAlbum),size:"4",variant:+s===r.idAlbum?"soft":"outline",children:[dt,r.titleAlbum]},r.idAlbum)):e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx(is,{size:"3"})});return e.jsxs("aside",{className:"list-menu__box",children:[e.jsxs("div",{className:"list-menu__box-nav",children:[e.jsx(P,{className:"list-menu__nav-title",as:"h2",size:"5",weight:"bold",mb:"3",children:"Навигация"}),e.jsxs("div",{className:"list-menu__nav",children:[e.jsxs(y,{size:"4",variant:s===I?"soft":"outline",onClick:()=>a(I),children:[lt,e.jsx("span",{children:"Актуальное"})]}),e.jsxs(y,{size:"4",variant:s===ae?"soft":"outline",onClick:()=>a(ae),children:[ct,e.jsx("span",{children:"Радио"})]}),e.jsxs(y,{size:"4",variant:s==="my"?"soft":"outline",onClick:()=>a($+"/my"),children:[nt,e.jsx("span",{children:"Мой плейлист"})]})]})]}),e.jsxs("div",{className:"list-menu__box-albums",children:[e.jsx(P,{className:"list-menu__box-albums-title",as:"h2",size:"5",weight:"bold",mb:"3",children:"Альбомы"}),e.jsx("div",{className:"list-menu__box-scr-area",children:e.jsx(Ne,{type:"auto",scrollbars:"both",children:e.jsx("div",{className:`list-menu__scr-list ${t&&"delay-m__type-3"}`,children:n})})})]})]})}const mt=i.memo(ht),pt=[{idT:0,name:"Светлая",value:"light"},{idT:1,name:"Тёмная",value:"dark"}],xt=[{idC:1,name:"Желтый",value:"yellow"},{idC:2,name:"Оранжевый",value:"amber"},{idC:3,name:"Красный",value:"tomato"},{idC:4,name:"Розовый",value:"crimson"},{idC:5,name:"Фиолетовый",value:"purple"},{idC:6,name:"Синий",value:"blue"},{idC:7,name:"Зеленый",value:"green"},{idC:8,name:"Лайм",value:"lime"},{idC:9,name:"Голубой",value:"sky"}];function gt({userName:t}){const s=N(),a=L(d=>d.userData),n=d=>{m.emit("setNavigate",d)},r=d=>{s(Hs(d)),V(`${G}/${a.user.uid}/settings/colorTheme`,d)},o=d=>{s(Zs(d)),V(`${G}/${a.user.uid}/settings/appearance`,d)},l=d=>{m.emit("setVisible",!1),setTimeout(()=>{localStorage.removeItem("userKeyData"),s(Rs(d)),s(Fs(d)),s(Gs(d))},1e3)},c=xt.map(d=>e.jsxs(U,{color:d.value,onClick:()=>r(d.value),children:[d.value===a.userSettings.colorTheme&&"•"," ",d.name]},d.idC)),u=pt.map(d=>e.jsxs(U,{onClick:()=>o(d.value),children:[d.value===a.userSettings.appearance&&"•"," ",d.name]},d.idT));return e.jsxs("div",{className:"header-panel__box",children:[e.jsxs(C,{className:"header-panel__text-user",size:"4",children:["Пользователь: ",t]}),e.jsx(ns,{children:e.jsxs(ls,{children:[e.jsx(cs,{style:{cursor:"pointer"},children:e.jsx(ds,{src:"https://demotivation.ru/wp-content/uploads/2021/12/image_562610131056464036330.jpg",fallback:"U",title:"Аватарка пользователя",className:"header-panel__user-img"})}),e.jsxs(us,{children:[e.jsx(U,{disabled:!0,children:"Профиль"}),e.jsx(U,{onClick:()=>n($+"/my"),children:"Мой плейлист"}),e.jsx(ue,{}),e.jsxs(he,{children:[e.jsx(me,{children:"Тема"}),e.jsx(pe,{children:u})]}),e.jsxs(he,{children:[e.jsx(me,{children:"Цвет темы"}),e.jsx(pe,{children:c})]}),e.jsx(ue,{}),e.jsx(hs,{children:e.jsx(U,{color:"red",children:"Выход"})})]}),e.jsxs(ms,{maxWidth:"450px",children:[e.jsx(ps,{children:"Выход"}),e.jsx(xs,{size:"2",children:"Вы уверены что хотите выйти?"}),e.jsxs(_,{gap:"3",mt:"4",justify:"end",children:[e.jsx(gs,{children:e.jsx(y,{variant:"soft",color:"gray",children:"Нет"})}),e.jsx(js,{children:e.jsx(y,{variant:"solid",color:"red",onClick:()=>l(!0),children:"Да"})})]})]})]})})]})}const jt=i.memo(gt);function ft({children:t,dopText:s=[],photo:a,className:n}){const r=s.map((o,l)=>e.jsx("p",{children:o},l));return e.jsx(F,{children:e.jsxs("div",{className:`header__box-title ${n}`,children:[e.jsx("div",{className:"header__box-img",children:a?e.jsx("img",{className:"header__img-alb",alt:"Фото раздела",src:a}):e.jsx(K,{width:"100%",height:"100%"})}),e.jsxs("div",{children:[e.jsx(P,{as:"h2",size:"7",weight:"bold",className:"header__title-alb",children:t}),r]})]})})}const Ge=i.memo(ft);function bt({dataList:t}){const s=n=>{console.log(n),m.emit("setNavigate",n)},a=t.map(n=>e.jsx("div",{onClick:()=>s($+"/"+n.idAlbum),className:"collect-list__box-elem",children:e.jsxs(F,{size:"2",children:[e.jsx(fs,{clip:"padding-box",side:"top",pb:"current",className:"collect-list__img-box",children:n.photoAlbum?e.jsx("img",{src:n.photoAlbum,alt:"Сборка: "+n.titleAlbum,className:"collect-list__img-pos"}):e.jsx(K,{width:"100%",height:"100%"})}),e.jsx(C,{as:"p",size:"4",children:e.jsx(bs,{children:n.titleAlbum})}),e.jsx("span",{children:"Номер альбома: "+n.idAlbum})]})},n.idAlbum));return e.jsxs("div",{className:"collect-list__box",children:[e.jsx(Ge,{photo:"https://abrakadabra.fun/uploads/posts/2022-02/1644672322_22-abrakadabra-fun-p-oblozhka-dlya-treka-vk-64.jpg",children:"Популярные сборники"}),e.jsx("div",{className:"collect-list__box-list",children:a})]})}const Ct=i.memo(bt),Lt=t=>{if(isNaN(t))return"";const s=new Date(t),a=["янв.","фев.","мар.","апр.","май","июн.","июл.","авг.","сен.","окт.","ноя.","дек."],n=s.getDate(),r=a[s.getMonth()],o=s.getFullYear();return`${n} ${r} ${o} г.`},ye=e.jsx(K,{width:"100%",height:"100%"}),vt="date",_t="title",wt="asc",yt="desc",kt=[{name:"Название ▲",pValue:"title-asc"},{name:"Название ▼",pValue:"title-desc"},{name:"Дата добавления ▲",pValue:"date-asc"},{name:"Дата добавления ▼",pValue:"date-desc"}],St=[{name:"10",pValue:10},{name:"20",pValue:20},{name:"50",pValue:50},{name:"Все",pValue:1/0}];function At({isEdit:t,dataList:s,likeTrackList:a,modeview:n,pageView:r}){var le,ce,de;const[o,l]=i.useState(vt),[c,u]=i.useState(yt),[d,g]=i.useState(new Set),j=n==="all"?1/0:parseInt(n)||20,f=r?parseInt(r):1,x=i.useMemo(()=>{if(!s.tracks)return[];const p=[...s.tracks],b=(S,A)=>{const D=c===wt?1:-1;return o===_t?D*S.title.localeCompare(A.title):D*(new Date(S.date)-new Date(A.date))};return p.sort(b)},[s.tracks,o,c]),h=i.useMemo(()=>{if(j!==1/0){const p=(f-1)*j;return x.slice(p,p+j)}return x},[x,f,j]),k=(p,b)=>{if(p.stopPropagation(),p.target.checked){const A={...b,idAlbum:s.idAlbum,titleAlbum:s.titleAlbum,date:Date.now()};m.emit("addTrack",A)}else t?(g(A=>new Set(A).add(b.idTrack)),setTimeout(()=>{m.emit("delTrack",b.idTrack),g(A=>{const D=new Set(A);return D.delete(b.idTrack),D})},700)):m.emit("delTrack",b.idTrack)},J=()=>{f>1&&m.emit("setNavigate",`${$}/${s.idAlbum}/${j===1/0?"all":j}/${f-1}`)},We=()=>{m.emit("setNavigate",`${$}/${s.idAlbum}/${j===1/0?"all":j}/${f+1}`)},Ke=p=>{m.emit("setNavigate",`${$}/${s.idAlbum}/${p===1/0?"all":p}/1`)},Je=p=>{const[b,S]=p.split("-");l(b),u(S)},Xe=p=>{m.emit("playTrack",p)},ne=p=>p.map((b,S)=>e.jsx(ws,{value:b.pValue,children:b.name},`${b.pValue}-${S}`)),qe=(p,b)=>e.jsxs(X,{className:`track-list__table-row ${d.has(p.idTrack)&&"delay-unm__type-4"}`,align:"center",onClick:()=>{Xe(p)},children:[e.jsx(T,{justify:"center",children:j!==1/0?(f-1)*j+b+1:b+1}),e.jsx(T,{justify:"center",children:e.jsx("div",{className:"table-c2__box-photo",children:p.photo?e.jsx("img",{src:p.photo,alt:"",title:`Обложка трека: ${p.title}`,className:"table-c2__photo"}):ye})}),e.jsxs(T,{justify:"start",children:[e.jsx("p",{className:"table-c3__title cell_text-overflow",children:p.title}),e.jsx("p",{className:"table-c3__artist cell_text-overflow",children:p.artist})]}),e.jsx(T,{className:"cell_text-overflow",justify:"center",children:p.titleAlbum||s.titleAlbum}),e.jsx(T,{justify:"center",children:Lt(p.date)}),e.jsx(T,{justify:"center",children:p.time}),e.jsx(T,{justify:"center",children:e.jsxs("label",{className:"table-c7__checkbox",onClick:S=>{S.stopPropagation()},children:[e.jsx("input",{type:"checkbox",className:"table-c7__input-cbox",checked:a.includes(p.idTrack),onChange:S=>{k(S,p)}}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",className:"table-c7__checkbox-img",children:e.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3c3.08 0 5.5 2.42 5.5 5.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})]})})]},p.idTrack);return e.jsxs("div",{className:"track-list__box",children:[e.jsx(Ge,{photo:s.photoAlbum,dopText:s.idAlbum&&[`Номер альбома: ${s.idAlbum||"-"}`,`Количество треков: ${((le=s.tracks)==null?void 0:le.length)||0}`],children:s.titleAlbum}),e.jsxs("div",{className:"track-list__params-box",children:[e.jsx("div",{className:"params-box__num-view-box",children:e.jsxs(xe,{defaultValue:j,onValueChange:Ke,disabled:!(h.length>0),children:[e.jsx(ge,{className:"num-view-box__list",variant:"soft"}),e.jsx(je,{children:e.jsxs(fe,{children:[e.jsx(be,{children:"Показывать по:"}),e.jsx(Ce,{}),ne(St)]})})]})}),e.jsxs(xe,{defaultValue:`${o}-${c}`,onValueChange:Je,disabled:!(h.length>0),children:[e.jsx(ge,{className:"params-box__list",variant:"soft"}),e.jsx(je,{children:e.jsxs(fe,{children:[e.jsx(be,{children:"Сортировка по:"}),e.jsx(Ce,{}),ne(kt)]})})]})]}),e.jsxs("div",{children:[e.jsx(Cs,{size:"4"}),e.jsxs(Ls,{className:"track-list__box-table",children:[e.jsx(vs,{children:e.jsxs(X,{className:"track-list__table-row",align:"center",children:[e.jsx(M,{className:"track-list__table-c1",justify:"center",children:"#"}),e.jsx(M,{className:"track-list__table-c2"}),e.jsx(M,{className:"track-list__table-c3",justify:"start",children:"Название"}),e.jsx(M,{className:"track-list__table-c4",justify:"center",children:"Альбом"}),e.jsx(M,{className:"track-list__table-c5",justify:"center",children:"Дата добавления"}),e.jsx(M,{className:"track-list__table-c6",justify:"center",children:ut}),e.jsx(M,{className:"track-list__table-c7"})]})}),e.jsx(_s,{children:h.length>0?h.map(qe):e.jsx(X,{className:"track-list__table-row",children:e.jsx(T,{colSpan:"7",children:ye})})})]})]}),((ce=s.tracks)==null?void 0:ce.length)>j&&e.jsx("div",{className:"track-list__page-btn-box",children:e.jsxs("div",{className:"page-btn__box",children:[e.jsx(y,{onClick:J,disabled:f===1,children:"<<"}),e.jsxs("span",{className:"page-btn__text",children:["Страница: ",f]}),e.jsx(y,{onClick:We,disabled:f>=Math.ceil(((de=s.tracks)==null?void 0:de.length)/j),children:">>"})]})})]})}const Tt=i.memo(At);function Nt(){const t=re(),s=Me(),a=N(),n=i.useRef(null),r=t.pathname===I,o=L(h=>h.musicUser),l=L(h=>h.userData.user.uid),c=L(h=>h.musicLists),[u,d]=i.useState(o.listIdTrack),g=i.useCallback(h=>{n.current=!0,a(zs(h))},[a]),j=i.useCallback(h=>{n.current=!0,a(Vs(h))},[a]),f=i.useCallback(h=>{console.log(h),a(Xs(h))},[a]);i.useEffect(()=>{u.length!==o.listIdTrack.length&&n.current===!0&&(V(`${ie}/${l}/musicList`,o.userMusicList),n.current=!1),d(o.listIdTrack)},[o.listIdTrack,u,n,o.userMusicList,l]),i.useEffect(()=>(m.on("addTrack",g),m.on("delTrack",j),m.on("playTrack",f),()=>{m.removeListener("addTrack",g),m.removeListener("delTrack",j),m.removeListener("playTrack",f)}),[g,j,f]);const x=(h=t.pathname,k=s.id)=>{if(k)return k==="my"?o.userMusicList||{}:c.musicAlbums.find(J=>J.idAlbum===+k)||{};switch(h){case I:return c.listAlbums||{};case ae:return c.radioList[0]||{};default:return{}}};return e.jsx("div",{className:"body-list__box delay-m__type-2",children:e.jsx(Ne,{type:"auto",scrollbars:"vertical",children:r?e.jsx(Ct,{dataList:x()}):e.jsx(Tt,{isEdit:s.id==="my",dataList:x(),likeTrackList:o.listIdTrack,modeview:s.modeview,pageView:s.page})})})}const Mt=i.memo(Nt),ke=t=>{const s=Math.floor(t/60),a=Math.floor(t%60);return`${s}:${a<10?"0":""}${a}`};function Et(){const t=N(),s=L(h=>h.appCache.currentTrack),a=L(h=>h.appCache.isPlaying),[n,r]=i.useState(1),o=i.useRef(null),[l,c]=i.useState(0),[u,d]=i.useState(0);i.useEffect(()=>{s&&o.current&&(o.current.src=s.uri,o.current.load(),a?o.current.play().catch(h=>console.error("Ошибка воспроизведения:",h)):o.current.pause())},[s,a]);const g=()=>{o.current&&(c(o.current.currentTime),d(o.current.duration))};i.useEffect(()=>{const h=o.current;if(h)return h.addEventListener("timeupdate",g),()=>{h.removeEventListener("timeupdate",g)}},[]);const j=()=>{t(qs())},f=h=>{const k=parseFloat(h/100);r(k),o.current&&(o.current.volume=k)};if(!s)return e.jsx("p",{children:"Трек не выбран"});const x=-1;return e.jsxs(w,{position:"absolute",left:"0",right:"0",bottom:"0",mb:"5",height:"64px",style:{borderRadius:"100px",boxShadow:"var(--shadow-6)",marginLeft:200,marginRight:200},children:[e.jsx(w,{width:"100%",height:"100%",position:"absolute",overflow:"hidden",style:{borderRadius:"100px",backgroundColor:"var(--color-floating-panel)",filter:"saturate(0.5) brightness(1.1)",WebkitBackdropFilter:"blur(24px)",backdropFilter:"blur(24px)"}}),e.jsxs(_,{height:"100%",justify:"between",position:"relative",children:[e.jsx(_,{gap:"4",align:"center",p:"3",children:e.jsx(q,{tabIndex:x,radius:"full",size:"3",onClick:j,children:a?e.jsx("svg",{width:"25",height:"25",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentcolor",viewBox:"0 0 30 30",width:"20",height:"20",style:{marginRight:-2},children:e.jsx("path",{d:"M 6 3 A 1 1 0 0 0 5 4 A 1 1 0 0 0 5 4.0039062 L 5 15 L 5 25.996094 A 1 1 0 0 0 5 26 A 1 1 0 0 0 6 27 A 1 1 0 0 0 6.5800781 26.8125 L 6.5820312 26.814453 L 26.416016 15.908203 A 1 1 0 0 0 27 15 A 1 1 0 0 0 26.388672 14.078125 L 6.5820312 3.1855469 L 6.5800781 3.1855469 A 1 1 0 0 0 6 3 z"})})})}),e.jsxs(_,{align:"center",gap:"3",children:[e.jsx(q,{tabIndex:x,color:"gray",variant:"ghost",radius:"full",size:"2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentcolor",fillOpacity:.7,viewBox:"0 0 30 30",width:"20",height:"20",style:{marginRight:2},children:e.jsx("path",{d:"M 14 6 A 1 1 0 0 0 13.408203 6.1953125 A 1 1 0 0 0 13.378906 6.2167969 L 2.4609375 14.15625 A 1 1 0 0 1 2.4589844 14.158203 L 2.4433594 14.169922 A 1 1 0 0 0 2 15 A 1 1 0 0 0 2.4492188 15.833984 L 13.40625 23.804688 A 1 1 0 0 0 14 24 A 1 1 0 0 0 15 23 A 1 1 0 0 0 15 22.996094 L 15 16.234375 L 25.40625 23.804688 A 1 1 0 0 0 26 24 A 1 1 0 0 0 27 23 A 1 1 0 0 0 27 22.996094 L 27 15 L 27 7.0039062 A 1 1 0 0 0 27 7 A 1 1 0 0 0 26 6 A 1 1 0 0 0 25.40625 6.1953125 A 1 1 0 0 0 25.378906 6.2167969 L 15 13.763672 L 15 7.0039062 A 1 1 0 0 0 15 7 A 1 1 0 0 0 14 6 z"})})}),e.jsxs(_,{align:"center",gap:"3",children:[e.jsx("div",{style:{borderRadius:"var(--radius-2)",width:"45px",height:"45px",overflow:"hidden"},children:s.photo?e.jsx("img",{className:"player__img-track",width:"100%",height:"100%",alt:`Фото трека: ${s.title}`,src:s.photo}):e.jsx(K,{width:"100%",height:"100%"})}),e.jsxs(w,{children:[e.jsx(C,{size:"1",as:"div",weight:"medium",children:s.title}),e.jsx(C,{size:"1",as:"div",color:"gray",mb:"2",children:s.artist}),e.jsxs(w,{position:"relative",height:"4px",width:"320px",style:{backgroundColor:"var(--gray-a5)",borderRadius:"var(--radius-1)"},children:[e.jsx(Le,{defaultValue:[l*100],onValueChange:h=>{console.log(l);const k=parseFloat(h)*u/100;c(k),o.current&&(o.current.currentTime=k)}}),e.jsx(w,{position:"absolute",top:"0",right:"0",mt:"-28px",children:e.jsx(C,{size:"1",color:"gray",children:`${ke(l.toFixed(2))} / ${ke(u?u.toFixed(2):0)}`})})]})]})]}),e.jsx(q,{tabIndex:x,color:"gray",variant:"ghost",radius:"full",size:"2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"20",height:"20",fill:"currentcolor",fillOpacity:.7,style:{marginLeft:2},children:e.jsx("path",{d:"M 4 6 A 1 1 0 0 0 3 7 A 1 1 0 0 0 3 7.0039062 L 3 15 L 3 22.996094 A 1 1 0 0 0 3 23 A 1 1 0 0 0 4 24 A 1 1 0 0 0 4.5917969 23.804688 L 4.59375 23.804688 A 1 1 0 0 0 4.6210938 23.783203 L 15 16.236328 L 15 22.996094 A 1 1 0 0 0 15 23 A 1 1 0 0 0 16 24 A 1 1 0 0 0 16.591797 23.804688 L 16.59375 23.804688 A 1 1 0 0 0 16.621094 23.783203 L 27.541016 15.841797 A 1 1 0 0 0 28 15 A 1 1 0 0 0 27.556641 14.169922 L 16.59375 6.1953125 A 1 1 0 0 0 16 6 A 1 1 0 0 0 15 7 A 1 1 0 0 0 15 7.0039062 L 15 13.765625 L 4.59375 6.1953125 A 1 1 0 0 0 4 6 z"})})})]}),e.jsxs(_,{align:"center",gap:"2",p:"5",children:[e.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 1.5C8 1.31062 7.893 1.13749 7.72361 1.05279C7.55421 0.968093 7.35151 0.986371 7.2 1.1L3.33333 4H1.5C0.671573 4 0 4.67158 0 5.5V9.5C0 10.3284 0.671573 11 1.5 11H3.33333L7.2 13.9C7.35151 14.0136 7.55421 14.0319 7.72361 13.9472C7.893 13.8625 8 13.6894 8 13.5V1.5ZM3.8 4.9L7 2.5V12.5L3.8 10.1C3.71345 10.0351 3.60819 10 3.5 10H1.5C1.22386 10 1 9.77614 1 9.5V5.5C1 5.22386 1.22386 5 1.5 5H3.5C3.60819 5 3.71345 4.96491 3.8 4.9ZM10.083 5.05577C9.96066 4.87185 9.71235 4.82195 9.52843 4.94432C9.3445 5.06669 9.2946 5.31499 9.41697 5.49892C10.2207 6.70693 10.2207 8.29303 9.41697 9.50104C9.2946 9.68496 9.3445 9.93326 9.52843 10.0556C9.71235 10.178 9.96066 10.1281 10.083 9.94418C11.0653 8.46773 11.0653 6.53222 10.083 5.05577Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),e.jsx(Le,{tabIndex:x,defaultValue:[n*100],variant:"soft",color:"gray",radius:"full",size:"2",onChange:f,style:{width:80}}),e.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7.46968 1.05085C7.64122 1.13475 7.75 1.30904 7.75 1.5V13.5C7.75 13.691 7.64122 13.8653 7.46968 13.9492C7.29813 14.0331 7.09377 14.0119 6.94303 13.8947L3.2213 11H1.5C0.671571 11 0 10.3284 0 9.5V5.5C0 4.67158 0.671573 4 1.5 4H3.2213L6.94303 1.10533C7.09377 0.988085 7.29813 0.966945 7.46968 1.05085ZM6.75 2.52232L3.69983 4.89468C3.61206 4.96294 3.50405 5 3.39286 5H1.5C1.22386 5 1 5.22386 1 5.5V9.5C1 9.77615 1.22386 10 1.5 10H3.39286C3.50405 10 3.61206 10.0371 3.69983 10.1053L6.75 12.4777V2.52232ZM10.2784 3.84804C10.4623 3.72567 10.7106 3.77557 10.833 3.95949C12.2558 6.09798 12.2558 8.90199 10.833 11.0405C10.7106 11.2244 10.4623 11.2743 10.2784 11.1519C10.0944 11.0296 10.0445 10.7813 10.1669 10.5973C11.4111 8.72728 11.4111 6.27269 10.1669 4.40264C10.0445 4.21871 10.0944 3.97041 10.2784 3.84804ZM12.6785 1.43044C12.5356 1.2619 12.2832 1.24104 12.1147 1.38386C11.9462 1.52667 11.9253 1.77908 12.0681 1.94762C14.7773 5.14488 14.7773 9.85513 12.0681 13.0524C11.9253 13.2209 11.9462 13.4733 12.1147 13.6161C12.2832 13.759 12.5356 13.7381 12.6785 13.5696C15.6406 10.0739 15.6406 4.92612 12.6785 1.43044Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})]})]}),e.jsx("audio",{ref:o})]})}const $t=i.memo(Et);function Pt(){const t=N(),s=re(),a=Me(),n=L(o=>o.musicLists.listAlbums),r=L(o=>o.userData.user);return i.useEffect(()=>{const o=async()=>{try{t(ve({state:1,error:null})),t(_e({state:1,error:null})),t(R({state:1,error:null}));const[l,c,u]=await Promise.all([Q(ot),Q(ie+"/"+r.uid),Q(G+"/"+r.uid)]);t(Is({state:2,error:null,data:l})),t(Us({state:2,error:null,data:c})),t(R({state:2,error:null})),t(Fe(u)),localStorage.setItem("cacheSettings",JSON.stringify(u))}catch(l){t(ve({state:3,error:Z(l.code)})),t(_e({state:3,error:Z(l.code)})),t(R({state:3,error:Z(l.code)}))}};r.uid&&o()},[t,r]),e.jsx("main",{className:"page-home__main",children:e.jsx(F,{style:{padding:"0",height:"100%",width:"100%"},children:e.jsxs("div",{className:"page-home__box",children:[e.jsx(it,{}),e.jsx(jt,{userName:r.email.split("@")[0]}),e.jsx(mt,{listAlbums:n,selectBtn:a.id||s.pathname}),e.jsx(Mt,{}),e.jsx($t,{})]})})})}const E=i.memo(Pt),It=()=>{const t=Ee(),[s,a]=i.useState(!0),n=i.useCallback(o=>{t(o)},[t]),r=i.useCallback(o=>{a(o)},[a]);return i.useEffect(()=>(m.on("setNavigate",n),m.on("setVisible",r),()=>{m.removeListener("setNavigate",n),m.removeListener("setVisible",r)}),[n,r]),e.jsx(i.Fragment,{children:e.jsx(se,{component:E,visible:s,delay:1e3,mountClass:"delay-m__type-2",unmountClass:"delay-unm__type-2"})})};function Rt(){return e.jsxs("div",{className:"page-auth__logo",children:[He,e.jsx(P,{as:"h1",size:"9",trim:"start",mt:"2",children:"MuSBoX"})]})}const Dt=i.memo(Rt),Ut=()=>{const t=Ee(),s=N(),[a,n]=i.useState(!0),[r,o]=i.useState(!0),l=i.useRef(null),c=i.useCallback(j=>{clearTimeout(l.current),l.current=setTimeout(()=>{s(R({state:0,error:null})),t(j)},1e3)},[t,s]),u=i.useCallback(()=>{o(!1),c(te)},[c]),d=i.useCallback(()=>{o(!1),c(Kt)},[c]),g=i.useCallback(()=>{o(!1),n(!1),c(I)},[c]);return i.useEffect(()=>(m.on("goPageSignIn",u),m.on("goPageSignUp",d),m.on("goPageHome",g),()=>{clearTimeout(l.current),m.removeListener("goPageSignIn",u),m.removeListener("goPageSignUp",d),m.removeListener("goPageHome",g)}),[g,u,d]),i.useEffect(()=>{if(r)return;const j=setTimeout(()=>{o(!0)},1e3);return()=>clearTimeout(j)},[r]),e.jsxs("div",{className:"page-auth__layout",children:[e.jsx(se,{component:Dt,visible:a,delay:1e3,mountClass:"delay-m__type-2",unmountClass:"delay-unm__type-2",className:"page-auth__logo-box"}),e.jsx(se,{component:Ae,visible:r,delay:1e3,mountClass:"delay-m__type-2",unmountClass:"delay-unm__type-2",className:"page-auth__form-box"})]})},H=e.jsx("svg",{width:"20",height:"15",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"translateY(3px)"},children:e.jsx("path",{d:"M0.877075 7.49972C0.877075 3.84204 3.84222 0.876892 7.49991 0.876892C11.1576 0.876892 14.1227 3.84204 14.1227 7.49972C14.1227 11.1574 11.1576 14.1226 7.49991 14.1226C3.84222 14.1226 0.877075 11.1574 0.877075 7.49972ZM7.49991 1.82689C4.36689 1.82689 1.82708 4.36671 1.82708 7.49972C1.82708 10.6327 4.36689 13.1726 7.49991 13.1726C10.6329 13.1726 13.1727 10.6327 13.1727 7.49972C13.1727 4.36671 10.6329 1.82689 7.49991 1.82689ZM8.24993 10.5C8.24993 10.9142 7.91414 11.25 7.49993 11.25C7.08571 11.25 6.74993 10.9142 6.74993 10.5C6.74993 10.0858 7.08571 9.75 7.49993 9.75C7.91414 9.75 8.24993 10.0858 8.24993 10.5ZM6.05003 6.25C6.05003 5.57211 6.63511 4.925 7.50003 4.925C8.36496 4.925 8.95003 5.57211 8.95003 6.25C8.95003 6.74118 8.68002 6.99212 8.21447 7.27494C8.16251 7.30651 8.10258 7.34131 8.03847 7.37854L8.03841 7.37858C7.85521 7.48497 7.63788 7.61119 7.47449 7.73849C7.23214 7.92732 6.95003 8.23198 6.95003 8.7C6.95004 9.00376 7.19628 9.25 7.50004 9.25C7.8024 9.25 8.04778 9.00601 8.05002 8.70417L8.05056 8.7033C8.05924 8.6896 8.08493 8.65735 8.15058 8.6062C8.25207 8.52712 8.36508 8.46163 8.51567 8.37436L8.51571 8.37433C8.59422 8.32883 8.68296 8.27741 8.78559 8.21506C9.32004 7.89038 10.05 7.35382 10.05 6.25C10.05 4.92789 8.93511 3.825 7.50003 3.825C6.06496 3.825 4.95003 4.92789 4.95003 6.25C4.95003 6.55376 5.19628 6.8 5.50003 6.8C5.80379 6.8 6.05003 6.55376 6.05003 6.25Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});function zt(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function Vt({loadStatus:t,errSignIn:s}){const[a,n]=i.useState(""),[r,o]=i.useState(""),[l,c]=i.useState(!1);i.useEffect(()=>{if(l||s){const g=document.getElementById("err-info");g==null||g.scrollIntoView({block:"start",behavior:"smooth"})}},[l,s]);const u=()=>{m.emit("goPageSignUp")},d=g=>{g.preventDefault(),zt(a)&&r.length>0?(c(!1),m.emit("sendSignInData",a,r)):c(!0)};return e.jsx(w,{mx:"auto",maxWidth:"350px",minWidth:"350px",children:e.jsx($e,{onSubmit:d,onReset:u,children:e.jsxs(F,{size:"4",children:[e.jsx(P,{as:"h3",size:"6",trim:"start",mb:"4",align:"center",children:"Авторизация"}),e.jsxs(w,{mb:"5",children:[e.jsx(_,{mb:"1",justify:"between",align:"baseline",children:e.jsx(C,{as:"label",htmlFor:"input-auth-login",size:"2",weight:"bold",children:"Эл. почта"})}),e.jsx(z,{placeholder:"Введите ваш email",id:"input-auth-login",mb:"1",autoComplete:"username",value:a,onChange:g=>n(g.target.value)})]}),e.jsxs(w,{mb:"5",children:[e.jsx(_,{align:"baseline",justify:"between",mb:"1",children:e.jsx(C,{as:"label",size:"2",weight:"bold",htmlFor:"input-auth-pass1",children:"Пароль"})}),e.jsx(z,{type:"password",placeholder:"Введите ваш пароль",id:"input-auth-pass1",mb:"1",autoComplete:"new-password",value:r,onChange:g=>o(g.target.value)})]}),(l||s)&&e.jsx(Pe,{id:"err-info",children:e.jsxs(Ie,{as:"div",size:"1",children:[l&&e.jsxs(C,{as:"div",className:"sign-in__text",children:['Проверьте правильность заполненных полей "Эл. почта" и "Пароль". ',H]}),s&&e.jsx(C,{as:"div",className:"sign-in__text",children:s})]})}),e.jsxs(_,{mt:"6",justify:"end",gap:"3",children:[e.jsx(y,{variant:"outline",style:{width:"135px"},type:"reset",disabled:t,children:"Создать аккаунт"}),e.jsx(y,{style:{width:"135px"},type:"submit",loading:t,children:"Авторизоваться"})]})]})})})}const Ft=i.memo(Vt);function Bt(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function Ot(t){return/^(?=.*[0-9]{1,})(?=.*[a-zA-Z]{1,}).{6,}$/.test(t)}function Zt(t,s){return t===s}function Ht({loadStatus:t,errSignUp:s}){const[a,n]=i.useState(""),[r,o]=i.useState(""),[l,c]=i.useState(""),[u,d]=i.useState({email:!1,password:!1,passwordRepeat:!1});i.useEffect(()=>{if(u.email||u.password||u.passwordRepeat||s){const x=document.getElementById("err-info");x==null||x.scrollIntoView({block:"start",behavior:"smooth"})}},[u,s]),i.useEffect(()=>{const x=h=>{h=h||window.event,(a||r||l)&&(h.preventDefault(),h.returnValue="Есть несохранённые данные!")};return(a||r||l)&&window.addEventListener("beforeunload",x),()=>{window.removeEventListener("beforeunload",x)}},[a,r,l]);const g=()=>{m.emit("goPageSignIn")},j=()=>{const x={email:!Bt(a),password:!Ot(r),passwordRepeat:!Zt(r,l)};return d(x),!Object.values(x).includes(!0)},f=x=>{x.preventDefault(),j()&&m.emit("sendSignUpData",a,r)};return e.jsx(w,{mx:"auto",maxWidth:"350px",minWidth:"350px",children:e.jsx($e,{onSubmit:f,onReset:g,children:e.jsxs(F,{size:"4",children:[e.jsx(P,{as:"h3",size:"6",trim:"start",mb:"4",align:"center",children:"Регистрация"}),e.jsxs(w,{mb:"5",children:[e.jsx(_,{mb:"1",justify:"between",align:"baseline",children:e.jsx(C,{as:"label",htmlFor:"input-auth-login",size:"2",weight:"bold",children:"Эл. почта"})}),e.jsx(z,{placeholder:"Введите ваш email",id:"input-auth-login",mb:"1",autoComplete:"username",value:a,onChange:x=>n(x.target.value)})]}),e.jsxs(w,{mb:"5",children:[e.jsx(_,{align:"baseline",justify:"between",mb:"1",children:e.jsx(C,{as:"label",size:"2",weight:"bold",htmlFor:"input-auth-pass1",children:"Пароль"})}),e.jsx(z,{type:"password",placeholder:"Введите ваш пароль",id:"input-auth-pass1",mb:"1",autoComplete:"new-password",value:r,onChange:x=>o(x.target.value)})]}),e.jsxs(w,{mb:"5",children:[e.jsx(_,{align:"baseline",justify:"between",mb:"1",children:e.jsx(C,{as:"label",size:"2",weight:"bold",htmlFor:"input-auth-pass2",children:"Повторите пароль"})}),e.jsx(z,{type:"password",placeholder:"Введите ваш пароль",id:"input-auth-pass2",mb:"1",autoComplete:"new-password",value:l,onChange:x=>c(x.target.value)})]}),(u.email||u.password||u.passwordRepeat||s)&&e.jsx(Pe,{id:"err-info",children:e.jsxs(Ie,{as:"div",size:"1",children:[u.email&&e.jsxs(C,{as:"div",className:"sign-up__text",children:["Проверьте Email ",H,e.jsx("ul",{children:e.jsx("li",{children:"Формат: user@mail.by"})})]}),u.password&&e.jsxs(C,{as:"div",className:"sign-up__text",children:["Некорректный пароль ",H,e.jsxs("ul",{children:[e.jsx("li",{children:"Минимальная длина: 6 символов;"}),e.jsx("li",{children:"Пароль должен содержать буквы (английские);"}),e.jsx("li",{children:"Пароль должен содержать цифры."})]})]}),u.passwordRepeat&&e.jsxs(C,{as:"div",className:"sign-up__text",children:["Пароли не совпадают! ",H]}),s&&e.jsx(C,{as:"div",className:"sign-up__text",children:s})]})}),e.jsxs(_,{mt:"6",justify:"end",gap:"3",children:[e.jsx(y,{variant:"outline",style:{width:"135px"},type:"reset",disabled:t,children:"Авторизоваться"}),e.jsx(y,{style:{width:"135px"},type:"submit",loading:t,children:"Создать аккаунт"})]})]})})})}const Gt=i.memo(Ht),Wt=({isSignUp:t})=>{const s=N(),a=L(l=>l.userData),n=L(l=>l.musicUser),r=i.useCallback(async(l,c)=>{try{s(R({state:1,error:null}));let u;if(t?u=await ys(we,l,c):u=await ks(we,l,c),u){let d=u.user,g={email:d.email,uid:d.uid};localStorage.setItem("userKeyData",JSON.stringify(d.stsTokenManager.accessToken)),s(Ve({state:0,error:null,data:g})),s(ee(!0)),m.emit("goPageHome"),t&&(V(`${G}/${d.uid}/settings`,a.userSettings),V(`${ie}/${d.uid}`,{albums:n.userAlbums,musicList:n.userMusicList}))}}catch(u){s(R({state:3,error:Z(u.code)}))}},[s,t,n.userAlbums,n.userMusicList,a.userSettings]),o=i.useCallback((l,c)=>r(l,c),[r]);return i.useEffect(()=>(m.on(t?"sendSignUpData":"sendSignInData",o),()=>{m.removeListener(t?"sendSignUpData":"sendSignInData",o)}),[o,t]),e.jsx(i.Fragment,{children:t?e.jsx(Gt,{loadStatus:a.dataLoadState===1,errSignUp:a.dataLoadError}):e.jsx(Ft,{loadStatus:a.dataLoadState===1,errSignIn:a.dataLoadError})})},Se=i.memo(Wt),Kt="/auth/sign-up",te="/auth/sign-in",I="/home",ae="/home/radio",$="/home/albums";function Jt(){return e.jsxs(Ss,{children:[e.jsxs(v,{element:e.jsx(et,{uriLogin:te}),children:[e.jsxs(v,{path:"/home",element:e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"MuSBoX - Web Player"}),e.jsx(It,{})]}),children:[e.jsx(v,{index:!0,path:"",element:e.jsx(e.Fragment,{children:e.jsx(E,{})})}),e.jsx(v,{index:!0,path:"radio",element:e.jsx(e.Fragment,{children:e.jsx(E,{})})}),e.jsx(v,{index:!0,path:"albums",element:e.jsx(e.Fragment,{children:e.jsx(E,{})})}),e.jsx(v,{index:!0,path:"albums/:id",element:e.jsx(e.Fragment,{children:e.jsx(E,{})})}),e.jsx(v,{index:!0,path:"albums/:id/:modeview",element:e.jsx(e.Fragment,{children:e.jsx(E,{})})}),e.jsx(v,{index:!0,path:"albums/:id/:modeview/:page",element:e.jsx(e.Fragment,{children:e.jsx(E,{})})})]}),e.jsx(v,{path:"*",element:e.jsx(B,{to:I})})]}),e.jsxs(v,{path:"/auth",element:e.jsx(e.Fragment,{children:e.jsx(Ut,{})}),children:[e.jsx(v,{path:"sign-in",element:e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"MuSBoX - Авторизация"}),e.jsx(Se,{isSignUp:!1})]})}),e.jsx(v,{path:"sign-up",element:e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"MuSBoX - Регистрация"}),e.jsx(Se,{isSignUp:!0})]})}),e.jsx(v,{index:!0,path:"*",element:e.jsx(B,{to:te,replace:!0})})]}),e.jsx(v,{path:"*",element:e.jsx(B,{to:I})})]})}const Xt=i.memo(Jt),qt=e.jsxs("svg",{width:"2560",height:"1920",viewBox:"0 0 2560 1920",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{opacity:.6,pointerEvents:"none",position:"absolute",width:"100%",height:"100%",zIndex:-100},children:[e.jsxs("g",{children:[e.jsx("path",{d:"M-119.809 -1055.99L859.027 -684.98C915.435 -663.6 955.626 -624.994 968.519 -579.807L1129.49 -15.6245L1860.47 -241.727C1919.02 -259.836 1985.68 -257.939 2042.09 -236.559L3020.93 134.453C3124.79 173.822 3164.97 266.777 3110.66 342.073L2850.06 703.385C2827.36 734.857 2790.34 759.666 2745.28 773.604L1467.45 1168.86L1748.58 2154.16C1758.67 2189.52 1751.28 2226.32 1727.72 2258.12L1361.75 2752.01L203.258 2312.91C146.85 2291.53 106.659 2252.92 93.7664 2207.73L-67.2076 1643.55L-798.184 1869.65C-856.73 1887.76 -923.398 1885.87 -979.806 1864.48L-2138.3 1425.38L-1787.63 925.687C-1765.05 893.507 -1727.57 868.111 -1681.77 853.942L-405.167 459.07L-686.568 -527.183C-696.491 -561.961 -689.511 -598.157 -666.811 -629.629L-406.21 -990.941C-351.902 -1066.24 -223.676 -1095.36 -119.809 -1055.99Z",fill:"url(#paint0_radial_37_453)"}),e.jsx("path",{d:"M885.9 -99.2158L1864.74 271.796C1921.14 293.177 1961.34 331.783 1974.23 376.97L2135.2 941.152L2866.18 715.049C2924.72 696.94 2991.39 698.837 3047.8 720.218L4026.64 1091.23C4130.5 1130.6 4170.68 1223.55 4116.37 1298.85L3855.77 1660.16C3833.07 1691.63 3796.05 1716.44 3750.99 1730.38L2473.16 2125.63L2754.29 3110.94C2764.38 3146.29 2756.99 3183.09 2733.43 3214.9L2367.46 3708.79L1208.97 3269.68C1152.56 3248.3 1112.37 3209.7 1099.48 3164.51C816.824 2173.87 747.087 1929.46 319.141 429.593C309.218 394.815 316.198 358.619 338.898 327.147L599.499 -34.1647C653.807 -109.461 782.033 -138.585 885.9 -99.2158Z",fill:"url(#paint1_radial_37_453)"}),e.jsx("path",{d:"M1597.13 169.784L2575.97 540.796C2632.38 562.177 2672.57 600.783 2685.46 645.97L2846.44 1210.15L3577.41 984.049C3635.96 965.94 3702.63 967.837 3759.03 989.218L4737.87 1360.23C4841.74 1399.6 4881.91 1492.55 4827.61 1567.85L4567 1929.16C4544.3 1960.63 4507.28 1985.44 4462.22 1999.38L3184.4 2394.63L3465.53 3379.94C3475.61 3415.29 3468.23 3452.09 3444.66 3483.9L3078.69 3977.79L1920.2 3538.68C1863.79 3517.3 1823.6 3478.7 1810.71 3433.51L1649.74 2869.33L918.759 3095.43C860.213 3113.54 793.545 3111.64 737.138 3090.26L-421.356 2651.15L-70.6875 2151.46C-48.1049 2119.28 -10.63 2093.89 35.1782 2079.72L1311.78 1684.85L1030.38 698.593C1020.45 663.815 1027.43 627.619 1050.13 596.147L1310.73 234.835C1365.04 159.539 1493.27 130.415 1597.13 169.784Z",fill:"url(#paint2_radial_37_453)"}),e.jsx("g",{filter:"url(#filter0_f_37_453)",children:e.jsx("path",{d:"M2395.71 -658.308L3374.55 -287.296C3430.96 -265.915 3471.15 -227.309 3484.04 -182.122L3645.01 382.06L4375.99 155.958C4434.54 137.848 4501.2 139.745 4557.61 161.126L5536.45 532.138C5640.32 571.507 5680.49 664.461 5626.18 739.757L5365.58 1101.07C5342.88 1132.54 5305.86 1157.35 5260.8 1171.29L3982.97 1566.54L4264.1 2551.84C4274.19 2587.2 4266.81 2624 4243.24 2655.81L3877.27 3149.7L2718.78 2710.59C2662.37 2689.21 2622.18 2650.6 2609.29 2605.42L2448.31 2041.24L1717.34 2267.34C1658.79 2285.45 1592.12 2283.55 1535.72 2262.17L377.222 1823.06L727.891 1323.37C750.473 1291.19 787.948 1265.8 833.756 1251.63L2110.35 856.754L1828.95 -129.498C1819.03 -164.277 1826.01 -200.472 1848.71 -231.944L2109.31 -593.257C2163.62 -668.552 2291.85 -697.677 2395.71 -658.308Z",fill:"url(#paint3_radial_37_453)"})}),e.jsx("path",{d:"M3059.26 767.932L3310.25 1618.16C3324.72 1667.15 3315.74 1727.88 3285.79 1783.6L2911.89 2479.3L3514.51 2558.36C3562.77 2564.69 3599.15 2596.78 3613.62 2645.77L3864.61 3496C3891.25 3586.22 3837.41 3706.98 3744.37 3765.74L3297.91 4047.66C3259.03 4072.22 3217.48 4082.97 3180.34 4078.1L2126.89 3939.89L1473.9 5154.88C1450.47 5198.48 1415.9 5235.81 1376.24 5260.35L760.412 5641.34L463.348 4635.06C448.884 4586.06 457.863 4525.33 487.81 4469.61L861.713 3773.92L259.094 3694.86C210.828 3688.53 174.448 3656.44 159.984 3607.44L-137.08 2601.17L474.823 2206.89C514.228 2181.5 556.514 2170.3 594.278 2175.25L1646.71 2313.32L2300.33 1097.17C2323.38 1054.28 2357.22 1017.43 2396.11 992.876L2842.57 710.953C2935.61 652.202 3032.62 677.712 3059.26 767.932Z",fill:"url(#paint4_radial_37_453)"})]}),e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"paint0_radial_37_453",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(-804.109 -2036.8) rotate(64.9401) scale(6436.87 6304.81)",children:[e.jsx("stop",{stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.0833333",stopColor:"var(--accent-7)"}),e.jsx("stop",{offset:"0.364583",stopColor:"var(--accent-5)"}),e.jsx("stop",{offset:"0.658041",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.798521",stopColor:"var(--accent-9)"}),e.jsx("stop",{offset:"0.942708",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"1",stopColor:"var(--color-background)"})]}),e.jsxs("radialGradient",{id:"paint1_radial_37_453",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(201.6 -1080.02) rotate(64.9401) scale(6436.87 6304.81)",children:[e.jsx("stop",{stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.0833333",stopColor:"var(--accent-2)"}),e.jsx("stop",{offset:"0.333803",stopColor:"var(--accent-1)"}),e.jsx("stop",{offset:"0.658041",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.798521",stopColor:"var(--accent-9)"}),e.jsx("stop",{offset:"0.942708",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"1",stopColor:"var(--color-background)"})]}),e.jsxs("radialGradient",{id:"paint2_radial_37_453",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(912.834 -811.021) rotate(64.9401) scale(6436.87 6304.81)",children:[e.jsx("stop",{stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.140625",stopColor:"var(--accent-3)"}),e.jsx("stop",{offset:"0.333803",stopColor:"var(--accent-7)"}),e.jsx("stop",{offset:"0.658041",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.798521",stopColor:"var(--accent-9)"}),e.jsx("stop",{offset:"0.942708",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"1",stopColor:"var(--color-background)"})]}),e.jsxs("radialGradient",{id:"paint3_radial_37_453",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1711.41 -1639.11) rotate(64.9401) scale(6436.87 6304.81)",children:[e.jsx("stop",{stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.0833333",stopColor:"var(--accent-7)"}),e.jsx("stop",{offset:"0.333803",stopColor:"var(--accent-1)"}),e.jsx("stop",{offset:"0.658041",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.798521",stopColor:"var(--accent-9)"}),e.jsx("stop",{offset:"0.942708",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"1",stopColor:"var(--color-background)"})]}),e.jsxs("radialGradient",{id:"paint4_radial_37_453",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(3479.06 -623.459) rotate(113.028) scale(8332.26 4870.62)",children:[e.jsx("stop",{stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.0833333",stopColor:"var(--accent-7)"}),e.jsx("stop",{offset:"0.333803",stopColor:"var(--accent-1)"}),e.jsx("stop",{offset:"0.658041",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"0.798521",stopColor:"var(--accent-9)"}),e.jsx("stop",{offset:"0.942708",stopColor:"var(--color-background)"}),e.jsx("stop",{offset:"1",stopColor:"var(--color-background)"})]})]})]});function Yt(){const t=N(),s=L(c=>c.userData.userSettings),[a,n]=i.useState(!1);//! УДАЛИТЬ
const r=L(c=>c.musicLists),o=L(c=>c.musicUser),l=L(c=>c.userData);return i.useEffect(()=>{n(!0);const c=localStorage.getItem("cacheSettings");c&&t(Fe(JSON.parse(c)))},[t]),a?e.jsxs(As,{accentColor:s.colorTheme,appearance:s.appearance,grayColor:"slate",panelBackground:"translucent",children:[qt,e.jsxs(Ts,{size:"4",maxWidth:"1920px",height:"100vh",children:[e.jsxs("div",{style:{position:"absolute",zIndex:"100"},children:[e.jsx("button",{onClick:()=>console.log(l),children:"testUS"}),e.jsx("button",{onClick:()=>console.log(o),children:"testMU"}),e.jsx("button",{onClick:()=>console.log(r),children:"testML"})]}),e.jsx(Xt,{})]})]}):null}Ns(document.getElementById("root")).render(e.jsx(Ms,{children:e.jsx(Es,{store:Ys,children:e.jsx(Yt,{})})}));
